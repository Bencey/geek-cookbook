name: Update leanpub branches

on:
  push:
    branches:
      - dev
    paths:
      - 'manuscript/*.md'
      - 'manuscript/**/*.md'
      - '.github/workflows/*'

jobs:
  update-leanpub:
    name: update-leanpub
    runs-on: ubuntu-latest
    steps:
    - name: Checkout charts repo
      uses: actions/checkout@v2

    - name: Merge to leanpub-preview branch
      uses: devmasx/merge-branch@v1.1.0
      with:
        type: now
        target_branch: 'leanpub-preview'
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        